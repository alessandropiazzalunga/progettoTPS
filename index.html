<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Risultati Sportivi</title>
</head>
<body>

<h1>Risultati Sportivi Recenti</h1>

<h2>Serie A</h2>
<div id="seriea">
    Caricamento...
</div>

<hr>

<h2>NBA</h2>
<div id="nba">
    Caricamento...
</div>

<script>
    const API_KEY = "f409b20350fbf92c636c245e5ed6452c";

    async function caricaCampionato(sportKey, containerId) {
        const container = document.getElementById(containerId);
        container.innerHTML = "Caricamento...";

        const url = `https://api.the-odds-api.com/v4/sports/${sportKey}/scores/?daysFrom=2&apiKey=${API_KEY}`;

        try {
            const response = await fetch(url);
            const data = await response.json();

            if (data.length === 0) {
                container.innerHTML = "Nessuna partita disponibile.";
                return;
            }

            container.innerHTML = "";

            data.forEach(match => {
                let homeScore = "-";
                let awayScore = "-";

                if (match.scores) {
                    const h = match.scores.find(s => s.name === match.home_team);
                    const a = match.scores.find(s => s.name === match.away_team);
                    if (h) homeScore = h.score;
                    if (a) awayScore = a.score;
                }

                const date = new Date(match.commence_time)
                    .toLocaleString("it-IT");

                const status = match.completed ? "Terminata" : "In corso / Programmata";

                container.innerHTML += `
                    <p>
                        ${match.home_team} - ${match.away_team}<br>
                        Risultato: ${homeScore} - ${awayScore}<br>
                        Stato: ${status}<br>
                        Data: ${date}
                    </p>
                `;
            });

        } catch (err) {
            container.innerHTML = "Errore di connessione.";
        }
    }

    caricaCampionato("soccer_italy_serie_a", "seriea");
    caricaCampionato("basketball_nba", "nba");
</script>

</body>
</html>